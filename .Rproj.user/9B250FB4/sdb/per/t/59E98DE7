{
    "contents" : "abandoned = read.csv(\"Data/Abandoned_Data_Seed.csv\",header = T,stringsAsFactors = F)\nreservation = read.csv(\"Data/Reservation_Data_Seed.csv\",header = T,stringsAsFactors = F)\n\nnrow(abandoned)\nreservation[reservation$Test_Control=='test',]\nnrow(reservation[reservation$Test_Control=='test',])\n\n\n#### Getting Duplicates in both Datasets\n#Email only\nmatching_email = match(abandoned$Email,reservation$Email,nomatch = 0)\nmatching_email\nduplicated(matching_email)\nmatching_email[!duplicated(matching_email)] # (76-2) = 74 obs\n\n\n\n#Incoming Phone only\nmatching_incoming = match(abandoned$Incoming_Phone,reservation$Incoming_Phone,nomatch = 0)\n\nduplicated(matching_incoming)\nmatching_incoming[!duplicated(matching_incoming)] # 313 obs\n\n\n#Contact Phone only\nmatching_contact = match(abandoned$Contact_Phone,reservation$Contact_Phone,nomatch = 0)\nduplicated(matching_contact)\nmatching_contact[!duplicated(matching_contact)] # 166 obs\n\n#Eamil | Incoming Phone | Contact \nmatching_eic = ((abandoned$Incoming_Phone %in% reservation$Incoming_Phone) \n                | (abandoned$Contact_Phone %in% reservation$Contact_Phone) \n                | abandoned$Email %in% reservation$Email)& \n                (!duplicated(matching_email) \n                | !duplicated(matching_incoming) \n                | !duplicated(matching_contact)\n                )                                    # To select matching observations in Abandoned DataSet on either email, \n                                                        # incoming or Contact phone and removing any duplicates from either.\nmatching_eic\nsum(matching_eic) \nabandoned_match = abandoned[matching_eic,]\nnrow(abandoned_match) #388 obs in Abandoned matched with obs in Reservation Dataset\n\n### Getting corresponding matching Reservation Dataset\n\nmatching_i_r = match(abandoned$Incoming_Phone, reservation$Incoming_Phone, nomatch = 0)\nmatching_i_r = matching_i_r[!duplicated(matching_i_r)]\nmatching_i_r\n\nmatching_e_r = match(abandoned$Email, reservation$Email, nomatch = 0)\nmatching_e_r = matching_e_r[!duplicated(matching_e_r)]\nmatching_e_r\n\nmatching_c_r = match(abandoned$Contact_Phone, reservation$Contact_Phone, nomatch = 0)\nmatching_c_r = matching_c_r[!duplicated(matching_c_r)]\nmatching_c_r\n\nmatching_eic_r = c(matching_i_r,matching_e_r,matching_c_r)\nmatching_eic_r\n\nmatching_eic_r = matching_eic_r[!duplicated(matching_eic_r)]\nmatching_eic_r\n\nreservation_match <- reservation[matching_eic_r,]\nreservation_match\n\n### Writing Matched datasets\n\nwrite.csv(x = reservation_match, file = \"reservation_match.csv\")\nwrite.csv(x = abandoned_match, file = \"abandoned_match.csv\")\n\n\n\n\n####Cleaning Matched Datasets\n\n\n# Reservation_match Data set cleaning\n# Crosschecking for any errors\nsum(match(reservation_match$Email, abandoned_match$Email, nomatch = 0) | \n  match(reservation_match$Incoming_Phone, abandoned_match$Incoming_Phone, nomatch = 0) |\n  match(reservation_match$Contact_Phone, abandoned_match$Contact_Phone, nomatch = 0))\n\nsum(match(abandoned_match$Email,reservation_match$Email, nomatch = 0) | \n  match( abandoned_match$Incoming_Phone,reservation_match$Incoming_Phone, nomatch = 0) |\n  match( abandoned_match$Contact_Phone, reservation_match$Contact_Phone,nomatch = 0))\n\n# Checking for more than one reservations \nduplicated(reservation_match$Incoming_Phone, incomparables = \"\")\nsum(duplicated(reservation_match$Incoming_Phone,incomparables = \"\")) # 10 obs with >1 reservation from same Incoming Phone\n\nduplicated(reservation_match$Contact_Phone,incomparables = \"\")\nsum(duplicated(reservation_match$Contact_Phone, incomparables = \"\")) # 0 obs with >1 reservation from same Contact Phone\n\nduplicated(reservation_match$Email,incomparables = \"\")\nsum(duplicated(reservation_match$Email, incomparables = \"\")) # 5 obs\n\n# Removing >1 reservation (incoming) obs from reservation_match dataset\nreservation_match_oneres = reservation_match[!duplicated(reservation_match$Incoming_Phone, incomparables = \"\"),]\nnrow(reservation_match_oneres) #same as abandoned_match\n\n# Checking again for duplicate emails \nduplicated(reservation_match_oneres$Email,incomparables = \"\")\nsum(duplicated(reservation_match_oneres$Email, incomparables = \"\"))\n\n# Removing >1 reservation (Email) obs from reservation_match dataset\nreservation_match_oneres <- reservation_match_oneres[!duplicated(reservation_match_oneres$Email, incomparables = \"\"),]\nnrow(reservation_match_oneres) # one less than abandoned_match\n\n# Writing new reservation_match_oneres dataset\nwrite.csv(x = reservation_match, file = \"reservation_match_oneres.csv\")\n\n\n#Abandoned_match dataset cleaning\n#Finding duplicates\nsum(duplicated(abandoned_match$Incoming_Phone, incomparables = \"\"))\nsum(duplicated(abandoned_match$Contact_Phone, incomparables = \"\")) # 1 dublicate Contact Phone\nsum(duplicated(abandoned_match$Email, incomparables = \"\"))\n\n# Removing duplicates\nabandoned_match[abandoned_match$Contact_Phone==\"(207)-726-7898\",]\nabandoned_match[duplicated(abandoned_match$Contact_Phone, incomparables = \"\"),] # making sure that 8168 is older observation of the two\n\nabandoned_match_nodup <- abandoned_match[!duplicated(abandoned_match$Contact_Phone, incomparables = \"\"),]\nnrow(abandoned_match_nodup) # Same as reservation_match_oneres\n\n# Writing new abandoned_match_nodup data set\nwrite.csv(x = reservation_match, file = \"abandoned_match_nodup.csv\")\n",
    "created" : 1442766900176.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3673270529",
    "id" : "59E98DE7",
    "lastKnownWriteTime" : 1442783807,
    "path" : "~/Studies/Courses/USF/Statistical Data Mining/MightyHive Project/MightyHive-Project/MightyHive Project.R",
    "project_path" : "MightyHive Project.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}